<script>
    const totalQuestions = 10;

    // Mixed correct answer positions:
    // Q1→3, Q2→1, Q3→4, Q4→1, Q5→2, Q6→1, Q7→4, Q8→1, Q9→3, Q10→1
    const correctAnswerIndices = [3,1,4,1,2,1,4,1,3,1];

    function submitQuiz() {
        let correctAnswers = 0;

        for (let i = 1; i <= totalQuestions; i++) {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            if (selected && parseInt(selected.value) === correctAnswerIndices[i-1]) {
                correctAnswers++;
            }
        }

        if (correctAnswers < totalQuestions) {
            alert("You must answer all questions correctly before submitting!");
            return;
        }

        const progress = {
            student: { id: 1 },
            quiz: { id: 3 },
            totalQuestions,
            correctAnswers,
            completed: true
        };

        fetch('/api/quiz-progress/complete', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(progress)
        })
            .then(res => res.json())
            .then(() => {
                alert(`Quiz submitted! Score: ${correctAnswers}/${totalQuestions}`);
                window.location.href = 'quiz.html';
            })
            .catch(err => {
                alert("Error submitting quiz.");
                console.error(err);
            });
    }
</script>
<h2>Quiz 3: Cyber Threats & Malware</h2>

<form id="quizForm">

    <div class="mb-3">
        <h6>1. What is ransomware?</h6>
        <div><input type="radio" name="q1" value="1"> An encryption protocol</div>
        <div><input type="radio" name="q1" value="2"> A firewall feature</div>
        <div><input type="radio" name="q1" value="3"> Malware that locks files and demands payment</div> <!-- Correct -->
        <div><input type="radio" name="q1" value="4"> Network monitoring software</div>
    </div>

    <div class="mb-3">
        <h6>2. Which of these is a phishing attack?</h6>
        <div><input type="radio" name="q2" value="1"> A fake email requesting login details</div> <!-- Correct -->
        <div><input type="radio" name="q2" value="2"> A virus that spreads through USB drives</div>
        <div><input type="radio" name="q2" value="3"> Installing an OS update</div>
        <div><input type="radio" name="q2" value="4"> Running antivirus</div>
    </div>

    <div class="mb-3">
        <h6>3. What does a Trojan horse do?</h6>
        <div><input type="radio" name="q3" value="1"> Prevents malware</div>
        <div><input type="radio" name="q3" value="2"> Encrypts network traffic</div>
        <div><input type="radio" name="q3" value="3"> Monitors user activity legally</div>
        <div><input type="radio" name="q3" value="4"> Disguises as legitimate software to harm system</div> <!-- Correct -->
    </div>

    <div class="mb-3">
        <h6>4. What is spyware?</h6>
        <div><input type="radio" name="q4" value="1"> Software that secretly monitors your activities</div> <!-- Correct -->
        <div><input type="radio" name="q4" value="2"> A type of antivirus</div>
        <div><input type="radio" name="q4" value="3"> A firewall</div>
        <div><input type="radio" name="q4" value="4"> A VPN</div>
    </div>

    <div class="mb-3">
        <h6>5. What is a worm?</h6>
        <div><input type="radio" name="q5" value="1"> A firewall rule</div>
        <div><input type="radio" name="q5" value="2"> Self-replicating malware that spreads across networks</div> <!-- Correct -->
        <div><input type="radio" name="q5" value="3"> Email encryption software</div>
        <div><input type="radio" name="q5" value="4"> Network scanning tool</div>
    </div>

    <div class="mb-3">
        <h6>6. Which is NOT a malware type?</h6>
        <div><input type="radio" name="q6" value="1"> Phishing email</div> <!-- Correct -->
        <div><input type="radio" name="q6" value="2"> Trojan</div>
        <div><input type="radio" name="q6" value="3"> Worm</div>
        <div><input type="radio" name="q6" value="4"> Ransomware</div>
    </div>

    <div class="mb-3">
        <h6>7. What is adware?</h6>
        <div><input type="radio" name="q7" value="1"> A security patch</div>
        <div><input type="radio" name="q7" value="2"> Network encryption</div>
        <div><input type="radio" name="q7" value="3"> Firewall rule</div>
        <div><input type="radio" name="q7" value="4"> Software that displays unwanted ads</div> <!-- Correct -->
    </div>

    <div class="mb-3">
        <h6>8. How can malware enter a system?</h6>
        <div><input type="radio" name="q8" value="1"> Through email attachments or downloads</div> <!-- Correct -->
        <div><input type="radio" name="q8" value="2"> Through VPN encryption</div>
        <div><input type="radio" name="q8" value="3"> By using a firewall</div>
        <div><input type="radio" name="q8" value="4"> Through strong passwords</div>
    </div>

    <div class="mb-3">
        <h6>9. What is a keylogger?</h6>
        <div><input type="radio" name="q9" value="1"> A firewall setting</div>
        <div><input type="radio" name="q9" value="2"> A VPN protocol</div>
        <div><input type="radio" name="q9" value="3"> Software that secretly records keystrokes</div> <!-- Correct -->
        <div><input type="radio" name="q9" value="4"> A malware scanner</div>
    </div>

    <div class="mb-3">
        <h6>10. What is social engineering?</h6>
        <div><input type="radio" name="q10" value="1"> Manipulating people to give sensitive info</div> <!-- Correct -->
        <div><input type="radio" name="q10" value="2"> Writing malware code</<span class="ml-2" /><span class="inline-block w-3 h-3 rounded-full bg-neutral-a12 align-middle mb-[0.1rem]" />