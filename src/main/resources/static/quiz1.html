<script>
    const totalQuestions = 10;

    // Mixed correct answers:
    // 1→2, 2→1, 3→4, 4→3, 5→1, 6→2, 7→1, 8→3, 9→1, 10→4
    const correctAnswerIndices = [2,1,4,3,1,2,1,3,1,4];

    function submitQuiz() {
        let correctAnswers = 0;

        for (let i = 1; i <= totalQuestions; i++) {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            if (selected && parseInt(selected.value) === correctAnswerIndices[i-1]) {
                correctAnswers++;
            }
        }

        if (correctAnswers < totalQuestions) {
            alert("You must answer all questions correctly before submitting!");
            return;
        }

        const progress = {
            student: { id: 1 },
            quiz: { id: 1 },
            totalQuestions,
            correctAnswers,
            completed: true
        };

        fetch('/api/quiz-progress/complete', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(progress)
        })
            .then(response => response.json())
            .then(data => {
                alert(`Quiz submitted successfully! Score: ${correctAnswers}/${totalQuestions}`);
                window.location.href = 'quiz.html';
            })
            .catch(error => {
                alert("Error submitting quiz.");
                console.error(error);
            });
    }
</script>
<h2>Quiz 1: Cybersecurity Basics</h2>

<form id="quizForm">

    <div class="mb-3">
        <h6>1. What does 'phishing' refer to?</h6>
        <div><input type="radio" name="q1" value="1"> A computer virus</div>
        <div><input type="radio" name="q1" value="2"> An email scam</div> <!-- correct -->
        <div><input type="radio" name="q1" value="3"> A strong password</div>
        <div><input type="radio" name="q1" value="4"> Physical security</div>
    </div>

    <div class="mb-3">
        <h6>2. What is a firewall?</h6>
        <div><input type="radio" name="q2" value="1"> A software tool to prevent unauthorized access</div> <!-- correct -->
        <div><input type="radio" name="q2" value="2"> A type of malware</div>
        <div><input type="radio" name="q2" value="3"> A hacking technique</div>
        <div><input type="radio" name="q2" value="4"> An encryption method</div>
    </div>

    <div class="mb-3">
        <h6>3. What does HTTPS stand for?</h6>
        <div><input type="radio" name="q3" value="1"> HyperText Transfer Protocol Standard</div>
        <div><input type="radio" name="q3" value="2"> Hyper Transfer Text Protocol Standard</div>
        <div><input type="radio" name="q3" value="3"> Hyper Transfer Text Protocol Secure</div>
        <div><input type="radio" name="q3" value="4"> HyperText Transfer Protocol Secure</div> <!-- correct -->
    </div>

    <div class="mb-3">
        <h6>4. Which is a common security measure?</h6>
        <div><input type="radio" name="q4" value="1"> Using '123456'</div>
        <div><input type="radio" name="q4" value="2"> Sharing passwords</div>
        <div><input type="radio" name="q4" value="3"> Using strong passwords</div> <!-- correct -->
        <div><input type="radio" name="q4" value="4"> Ignoring updates</div>
    </div>

    <div class="mb-3">
        <h6>5. What is malware?</h6>
        <div><input type="radio" name="q5" value="1"> Malicious software designed to harm</div> <!-- correct -->
        <div><input type="radio" name="q5" value="2"> A network tool</div>
        <div><input type="radio" name="q5" value="3"> A firewall feature</div>
        <div><input type="radio" name="q5" value="4"> An encryption algorithm</div>
    </div>

    <div class="mb-3">
        <h6>6. What should you check before clicking a link?</h6>
        <div><input type="radio" name="q6" value="1"> Your email</div>
        <div><input type="radio" name="q6" value="2"> The URL</div> <!-- correct -->
        <div><input type="radio" name="q6" value="3"> Other people’s emails</div>
        <div><input type="radio" name="q6" value="4"> Your calendar</div>
    </div>

    <div class="mb-3">
        <h6>7. What is two-factor authentication?</h6>
        <div><input type="radio" name="q7" value="1"> Two methods of verifying identity</div> <!-- correct -->
        <div><input type="radio" name="q7" value="2"> A way to hack someone's account</div>
        <div><input type="radio" name="q7" value="3"> A type of password</div>
        <div><input type="radio" name="q7" value="4"> An encryption method</div>
    </div>

    <div class="mb-3">
        <h6>8. What is a VPN?</h6>
        <div><input type="radio" name="q8" value="1"> Very Private Network</div>
        <div><input type="radio" name="q8" value="2"> Virus Protection Network</div>
        <div><input type="radio" name="q8" value="3"> Virtual Private Network</div> <!-- correct -->
        <div><input type="radio" name="q8" value="4"> Virtual Protocol Network</div>
    </div>

    <div class="mb-3">
        <h6>9. Which of these is a strong password?</h6>
        <div><input type="radio" name="q9" value="1"> P@ssw0rd!</div> <!-- correct -->
        <div><input type="radio" name="q9" value="2"> password123</div>
        <div><input type="radio" name="q9" value="3"> 12345678</div>
        <div><input type="radio" name="q9" value="4"> abcdefg</div>
    </div>

    <div class="mb-3">
        <h6>10. What does 'social engineering' mean?</h6>
        <div><input type="radio" name="q10" value="1"> A software type</div>
        <div><input type="radio" name="q10" value="2"> A design methodology</div>
        <div><input type="radio" name="q10" value="3"> An engineering job</div>
        <div><input type="radio" name="q10" value="4"> Manipulating people to divulge information</div> <!-- correct -->
    </div>

    <button type="button" class="btn btn-primary" onclick="submitQuiz()">Submit</button>
</form>

<div class="mt-3">
    <button class="btn btn-secondary" onclick="window.location.href='quiz.html'">Return to Quiz Selection</button>
</div>