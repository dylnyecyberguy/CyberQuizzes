<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quiz 4: Cloud & Data Security</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        const totalQuestions = 10;
        const correctAnswerIndices = [1,1,1,1,1,1,1,1,1,1]; // correct options for each question

        function updateProgressBar() {
            let correctAnswers = 0;
            for (let i = 1; i <= totalQuestions; i++) {
                const selectedOption = document.querySelector(`input[name="q${i}"]:checked`);
                if (selectedOption && parseInt(selectedOption.value) === correctAnswerIndices[i-1]) {
                    correctAnswers++;
                }
            }
            const progressPercentage = (correctAnswers / totalQuestions) * 100;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progressPercentage + '%';
            progressBar.setAttribute('aria-valuenow', progressPercentage);
            progressBar.textContent = Math.round(progressPercentage) + '%';

            if (progressPercentage === 100) {
                progressBar.classList.add('bg-success');
            } else {
                progressBar.classList.remove('bg-success');
            }
        }

        function submitQuiz() {
            let correctAnswers = 0;
            for (let i = 1; i <= totalQuestions; i++) {
                const selectedOption = document.querySelector(`input[name="q${i}"]:checked`);
                if (selectedOption && parseInt(selectedOption.value) === correctAnswerIndices[i-1]) {
                    correctAnswers++;
                }
            }

            if (correctAnswers < totalQuestions) {
                alert("You must answer all questions correctly before submitting!");
                return;
            }

            localStorage.setItem('quiz4Progress', 100);

            const progress = {
                student: { id: 1 }, // replace with real student ID
                quiz: { id: 4 },    // Quiz 4 ID
                totalQuestions,
                correctAnswers,
                completed: true
            };

            fetch('/api/quiz-progress/complete', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(progress)
            })
                .then(response => response.json())
                .then(data => {
                    alert(`Quiz submitted successfully! Your score: ${correctAnswers}/${totalQuestions}`);
                    window.location.href = 'quiz.html';
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert("An error occurred while submitting the quiz.");
                });
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', updateProgressBar);
            });
            updateProgressBar();
        });
    </script>
</head>
<body class="bg-light">
<div class="container mt-5">
    <h2>Quiz 4: Cloud & Data Security</h2>

    <div class="progress mb-3">
        <div class="progress-bar" role="progressbar" id="progressBar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
    </div>

    <form id="quizForm">
        <!-- Questions -->
        <div class="mb-3">
            <h6>1. What is data encryption in the cloud?</h6>
            <div><input type="radio" id="q1a1" name="q1" value="1"><label for="q1a1">Converting data into a secure format unreadable without a key</label></div>
            <div><input type="radio" id="q1a2" name="q1" value="2"><label for="q1a2">Storing data on a public website</label></div>
            <div><input type="radio" id="q1a3" name="q1" value="3"><label for="q1a3">Backing up data to USB drives</label></div>
            <div><input type="radio" id="q1a4" name="q1" value="4"><label for="q1a4">Using strong passwords only</label></div>
        </div>

        <div class="mb-3">
            <h6>2. Which is a key aspect of cloud security?</h6>
            <div><input type="radio" id="q2a1" name="q2" value="1"><label for="q2a1">Access control and authentication</label></div>
            <div><input type="radio" id="q2a2" name="q2" value="2"><label for="q2a2">Leaving servers unmonitored</label></div>
            <div><input type="radio" id="q2a3" name="q2" value="3"><label for="q2a3">Ignoring patches</label></div>
            <div><input type="radio" id="q2a4" name="q2" value="4"><label for="q2a4">Disabling firewalls</label></div>
        </div>

        <div class="mb-3">
            <h6>3. What is multi-factor authentication (MFA)?</h6>
            <div><input type="radio" id="q3a1" name="q3" value="1"><label for="q3a1">Using two or more verification methods to access cloud services</label></div>
            <div><input type="radio" id="q3a2" name="q3" value="2"><label for="q3a2">Encrypting only emails</label></div>
            <div><input type="radio" id="q3a3" name="q3" value="3"><label for="q3a3">A type of firewall</label></div>
            <div><input type="radio" id="q3a4" name="q3" value="4"><label for="q3a4">Backing up data locally</label></div>
        </div>

        <div class="mb-3">
            <h6>4. Which is an example of data loss prevention?</h6>
            <div><input type="radio" id="q4a1" name="q4" value="1"><label for="q4a1">Monitoring and restricting sensitive data transfer</label></div>
            <div><input type="radio" id="q4a2" name="q4" value="2"><label for="q4a2">Installing games on cloud servers</label></div>
            <div><input type="radio" id="q4a3" name="q4" value="3"><label for="q4a3">Ignoring alerts</label></div>
            <div><input type="radio" id="q4a4" name="q4" value="4"><label for="q4a4">Disabling authentication</label></div>
        </div>

        <div class="mb-3">
            <h6>5. What is a VPN used for?</h6>
            <div><input type="radio" id="q5a1" name="q5" value="1"><label for="q5a1">Secure remote access to cloud and network resources</label></div>
            <div><input type="radio" id="q5a2" name="q5" value="2"><label for="q5a2">Increasing download speed</label></div>
            <div><input type="radio" id="q5a3" name="q5" value="3"><label for="q5a3">Installing software</label></div>
            <div><input type="radio" id="q5a4" name="q5" value="4"><label for="q5a4">Backing up data offline</label></div>
        </div>

        <div class="mb-3">
            <h6>6. What is the principle of least privilege?</h6>
            <div><input type="radio" id="q6a1" name="q6" value="1"><label for="q6a1">Granting users only the access they need</label></div>
            <div><input type="radio" id="q6a2" name="q6" value="2"><label for="q6a2">Giving all users admin access</label></div>
            <div><input type="radio" id="q6a3" name="q6" value="3"><label for="q6a3">Allowing open public access</label></div>
            <div><input type="radio" id="q6a4" name="q6" value="4"><label for="q6a4">Sharing passwords freely</label></div>
        </div>

        <div class="mb-3">
            <h6>7. What is cloud backup?</h6>
            <div><input type="radio" id="q7a1" name="q7" value="1"><label for="q7a1">Storing copies of data in cloud storage for recovery</label></div>
            <div><input type="radio" id="q7a2" name="q7" value="2"><label for="q7a2">Deleting local files</label></div>
            <div><input type="radio" id="q7a3" name="q7" value="3"><label for="q7a3">Encrypting all network traffic</label></div>
            <div><input type="radio" id="q7a4" name="q7" value="4"><label for="q7a4">Setting strong passwords</label></div>
        </div>

        <div class="mb-3">
            <h6>8. What is a cloud firewall?</h6>
            <div><input type="radio" id="q8a1" name="q8" value="1"><label for="q8a1">A security service filtering traffic to/from cloud resources</label></div>
            <div><input type="radio" id="q8a2" name="q8" value="2"><label for="q8a2">A type of cloud storage</label></div>
            <div><input type="radio" id="q8a3" name="q8" value="3"><label for="q8a3">A backup tool</label></div>
            <div><input type="radio" id="q8a4" name="q8" value="4"><label for="q8a4">An antivirus program</label></div>
        </div>

        <div class="mb-3">
            <h6>9. How can data be protected in transit?</h6>
            <div><input type="radio" id="q9a1" name="q9" value="1"><label for="q9a1">Using encryption protocols like TLS/SSL</label></div>
            <div><input type="radio" id="q9a2" name="q9" value="2"><label for="q9a2">Storing unencrypted data on the cloud</label></div>
            <div><input type="radio" id="q9a3" name="q9" value="3"><label for="q9a3">Using default passwords</label></div>
            <div><input type="radio" id="q9a4" name="q9" value="4"><label for="q9a4">Sharing data via email only</label></div>
        </div>

        <div class="mb-3">
            <h6>10. Which of these is a good practice for data security?</h6>
            <div><input type="radio" id="q10a1" name="q10" value="1"><label for="q10a1">Regular backups, encryption, and access control</label></div>
            <div><input type="radio" id="q10a2" name="q10" value="2"><label for="q10a2">Sharing cloud passwords</label></div>
            <div><input type="radio" id="q10a3" name="q10" value="3"><label for="q10a3">Ignoring software updates</label></div>
            <div><input type="radio" id="q10a4" name="q10" value="4"><label for="q10a4">Storing sensitive data unencrypted</label></div>
        </div>

        <button type="button" class="btn btn-primary" onclick="submitQuiz()">Submit</button>
    </form>

    <div class="mt-3">
        <button class="btn btn-secondary" onclick="window.location.href='quiz.html'">Return to Quiz Selection</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
