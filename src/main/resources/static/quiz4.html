<script>
    const totalQuestions = 10;

    // Mixed answer key:
    // Q1→3, Q2→1, Q3→4, Q4→1, Q5→1, Q6→2, Q7→1, Q8→1, Q9→1, Q10→1
    const correctAnswerIndices = [3,1,4,1,1,2,1,1,1,1];

    function submitQuiz() {
        let correct = 0;

        for (let i = 1; i <= totalQuestions; i++) {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            if (selected && parseInt(selected.value) === correctAnswerIndices[i-1]) {
                correct++;
            }
        }

        if (correct < totalQuestions) {
            alert("You must answer all questions correctly before submitting!");
            return;
        }

        const progress = {
            student: { id: 1 },
            quiz: { id: 4 },
            totalQuestions,
            correctAnswers: correct,
            completed: true
        };

        fetch('/api/quiz-progress/complete', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(progress)
        })
            .then(r => r.json())
            .then(() => {
                alert(`Quiz submitted successfully! Score: ${correct}/${totalQuestions}`);
                window.location.href = 'quiz.html';
            })
            .catch(err => {
                alert("Error submitting quiz.");
                console.error(err);
            });
    }
</script>
<h2>Quiz 4: Cloud & Data Security</h2>

<form id="quizForm">

    <div class="mb-3">
        <h6>1. What is data encryption in the cloud?</h6>
        <div><input type="radio" name="q1" value="1"> Storing data on a public website</div>
        <div><input type="radio" name="q1" value="2"> Backing up data to USB drives</div>
        <div><input type="radio" name="q1" value="3"> Converting data into a secure unreadable format</div> <!-- correct -->
        <div><input type="radio" name="q1" value="4"> Using strong passwords only</div>
    </div>

    <div class="mb-3">
        <h6>2. Which is a key aspect of cloud security?</h6>
        <div><input type="radio" name="q2" value="1"> Access control and authentication</div> <!-- correct -->
        <div><input type="radio" name="q2" value="2"> Leaving servers unmonitored</div>
        <div><input type="radio" name="q2" value="3"> Ignoring patches</div>
        <div><input type="radio" name="q2" value="4"> Disabling firewalls</div>
    </div>

    <div class="mb-3">
        <h6>3. What is multi-factor authentication?</h6>
        <div><input type="radio" name="q3" value="1"> Encrypting only emails</div>
        <div><input type="radio" name="q3" value="2"> A type of firewall</div>
        <div><input type="radio" name="q3" value="3"> Backing up data locally</div>
        <div><input type="radio" name="q3" value="4"> Using 2+ verification methods</div> <!-- correct -->
    </div>

    <div class="mb-3">
        <h6>4. Which is an example of data loss prevention?</h6>
        <div><input type="radio" name="q4" value="1"> Monitoring and restricting sensitive data transfer</div> <!-- correct -->
        <div><input type="radio" name="q4" value="2"> Installing games on cloud servers</div>
        <div><input type="radio" name="q4" value="3"> Ignoring alerts</div>
        <div><input type="radio" name="q4" value="4"> Disabling authentication</div>
    </div>

    <div class="mb-3">
        <h6>5. What is a VPN used for?</h6>
        <div><input type="radio" name="q5" value="1"> Secure remote access to cloud resources</div> <!-- correct -->
        <div><input type="radio" name="q5" value="2"> Increasing download speed</div>
        <div><input type="radio" name="q5" value="3"> Installing software</div>
        <div><input type="radio" name="q5" value="4"> Offline backups</div>
    </div>

    <div class="mb-3">
        <h6>6. What is the principle of least privilege?</h6>
        <div><input type="radio" name="q6" value="1"> Giving all users admin access</div>
        <div><input type="radio" name="q6" value="2"> Granting users only needed access</div> <!-- correct -->
        <div><input type="radio" name="q6" value="3"> Public access for everyone</div>
        <div><input type="radio" name="q6" value="4"> Sharing passwords freely</div>
    </div>

    <div class="mb-3">
        <h6>7. What is cloud backup?</h6>
        <div><input type="radio" name="q7" value="1"> Storing copies of data in cloud for recovery</div> <!-- correct -->
        <div><input type="radio" name="q7" value="2"> Deleting local files</div>
        <div><input type="radio" name="q7" value="3"> Encrypting all traffic</div>
        <div><input type="radio" name="q7" value="4"> Setting strong passwords</div>
    </div>

    <div class="mb-3">
        <h6>8. What is a cloud firewall?</h6>
        <div><input type="radio" name="q8" value="1"> A security service filtering cloud traffic</div> <!-- correct -->
        <div><input type="radio" name="q8" value="2"> Cloud storage</div>
        <div><input type="radio" name="q8" value="3"> Backup tool</div>
        <div><input type="radio" name="q8" value="4"> Antivirus program</div>
    </div>

    <div class="mb-3">
        <h6>9. How can data be protected in transit?</h6>
        <div><input type="radio" name="q9" value="1"> Using TLS/SSL encryption</div> <!-- correct -->
        <div><input type="radio" name="q9" value="2"> Storing unencrypted data</div>
        <div><input type="radio" name="q9" value="3"> Using default passwords</div>
        <div<span class="ml-2" /><span class="inline-block w-3 h-3 rounded-full bg-neutral-a12 align-middle mb-[0.1rem]" />