<script>
    const totalQuestions = 10;

    const correctAnswerIndices = [2,1,1,1,1,1,1,1,1,1];

    function submitQuiz() {
        let correct = 0;

        for (let i = 1; i <= totalQuestions; i++) {
            const sel = document.querySelector(`input[name="q${i}"]:checked`);
            if (sel && parseInt(sel.value) === correctAnswerIndices[i-1]) correct++;
        }

        if (correct < totalQuestions) {
            alert("You must answer all questions correctly before submitting!");
            return;
        }

        const progress = {
            student: { id: 1 },
            quiz: { id: 5 },
            totalQuestions,
            correctAnswers: correct,
            completed: true
        };

        fetch('/api/quiz-progress/complete', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(progress)
        })
            .then(res => res.json())
            .then(() => {
                alert(`Quiz submitted! Score: ${correct}/${totalQuestions}`);
                window.location.href = 'quiz.html';
            })
            .catch(err => {
                alert("Error submitting quiz.");
                console.error(err);
            });
    }
</script>
<h2>Quiz 5: IT Policies & Compliance</h2>

<form id="quizForm">

    <div class="mb-3">
        <h6>1. What is an IT policy?</h6>
        <div><input type="radio" name="q1" value="1"> A software installation guide</div>
        <div><input type="radio" name="q1" value="2"> A set of rules guiding IT usage and security</div> <!-- correct -->
        <div><input type="radio" name="q1" value="3"> A programming standard</div>
        <div><input type="radio" name="q1" value="4"> A password storage method</div>
    </div>

    <div class="mb-3">
        <h6>2. What is GDPR?</h6>
        <div><input type="radio" name="q2" value="1"> A European data protection regulation</div> <!-- correct -->
        <div><input type="radio" name="q2" value="2"> A cloud storage service</div>
        <div><input type="radio" name="q2" value="3"> A type of firewall</div>
        <div><input type="radio" name="q2" value="4"> A network protocol</div>
    </div>

    <div class="mb-3">
        <h6>3. What is the main goal of compliance?</h6>
        <div><input type="radio" name="q3" value="1"> Ensure policies and regulations are followed</div> <!-- correct -->
        <div><input type="radio" name="q3" value="2"> Install antivirus software</div>
        <div><input type="radio" name="q3" value="3"> Encrypt data locally only</div>
        <div><input type="radio" name="q3" value="4"> Disable firewalls</div>
    </div>

    <div class="mb-3">
        <h6>4. Which is a compliance standard?</h6>
        <div><input type="radio" name="q4" value="1"> ISO 27001</div> <!-- correct -->
        <div><input type="radio" name="q4" value="2"> HTML5</div>
        <div><input type="radio" name="q4" value="3"> TCP/IP</div>
        <div><input type="radio" name="q4" value="4"> Bootstrap</div>
    </div>

    <div class="mb-3">
        <h6>5. What is an acceptable use policy?</h6>
        <div><input type="radio" name="q5" value="1"> Rules for appropriate IT resource usage</div> <!-- correct -->
        <div><input type="radio" name="q5" value="2"> A type of firewall</div>
        <div><input type="radio" name="q5" value="3"> Data encryption method</div>
        <div><input type="radio" name="q5" value="4"> Cloud storage service</div>
    </div>

    <div class="mb-3">
        <h6>6. Why are IT audits performed?</h6>
        <div><input type="radio" name="q6" value="1"> Ensure policies and controls are effective</div> <!-- correct -->
        <div><input type="radio" name="q6" value="2"> Delete old files</div>
        <div><input type="radio" name="q6" value="3"> Install software</div>
        <div><input type="radio" name="q6" value="4"> Reset passwords</div>
    </div>

    <div class="mb-3">
        <h6>7. What does HIPAA regulate?</h6>
        <div><input type="radio" name="q7" value="1"> Healthcare data privacy & security</div> <!-- correct -->
        <div><input type="radio" name="q7" value="2"> Financial transactions</div>
        <div><input type="radio" name="q7" value="3"> Email marketing</div>
        <div><input type="radio" name="q7" value="4"> Cloud storage costs</div>
    </div>

    <div class="mb-3">
        <h6>8. What is RBAC?</h6>
        <div><input type="radio" name="q8" value="1"> Access based on user roles</div> <!-- correct -->
        <div><input type="radio" name="q8" value="2"> Random password generation</div>
        <div><input type="radio" name="q8" value="3"> Installing antivirus</div>
        <div><input type="radio" name="q8" value="4"> Cloud backup schedules</div>
    </div>

    <div class="mb-3">
        <h6>9. Why is documentation important?</h6>
        <div><input type="radio" name="q9" value="1"> Ensures procedures are clear & auditable</div> <!-- correct -->
        <div><input type="radio" name="q9" value="2"> To confuse users</div>
        <div><input type="radio" name="q9" value="3"> Store personal emails</div>
        <div><input type="radio" name="q9" value="4"> Reduce storage space</div>
    </div>

    <div class="mb-3">
        <h6>10. Best practice for IT compliance?</h6>
        <div><input type="radio" name="q10" value="1"> Policy review, training, audits</div> <!-- correct -->
        <div><input type="radio" name="q10" value="2"> Ignore regulations</div>
        <div><input type="radio" name="q10" value="3"> Share passwords publicly</div>
        <div><input type="radio" name="q10" value="4"> Disable logs</div>
    </div>

    <button type="button" class="btn btn-primary" onclick="submitQuiz()">Submit</button>

</form>

<div class="mt-3">
    <button class="btn btn-secondary" onclick="window.location.href='quiz.html'">Return</button>
</div>