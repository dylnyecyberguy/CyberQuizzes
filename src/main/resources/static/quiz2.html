<script>
    const totalQuestions = 10;

    // Mixed correct answers:
    // Q1=1, Q2=3, Q3=4, Q4=1, Q5=1, Q6=2, Q7=1, Q8=1, Q9=1, Q10=1
    const correctAnswerIndices = [1,3,4,1,1,2,1,1,1,1];

    function submitQuiz() {
        let correctAnswers = 0;

        for (let i = 1; i <= totalQuestions; i++) {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            if (selected && parseInt(selected.value) === correctAnswerIndices[i-1]) {
                correctAnswers++;
            }
        }

        if (correctAnswers < totalQuestions) {
            alert("You must answer all questions correctly before submitting!");
            return;
        }

        const progress = {
            student: { id: 1 },
            quiz: { id: 2 },
            totalQuestions,
            correctAnswers,
            completed: true
        };

        fetch('/api/quiz-progress/complete', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(progress)
        })
            .then(res => res.json())
            .then(() => {
                alert(`Quiz submitted! Score: ${correctAnswers}/${totalQuestions}`);
                window.location.href = 'quiz.html';
            })
            .catch(err => {
                alert("Error submitting quiz.");
                console.error(err);
            });
    }
</script>



<form id="quizForm">

    <div class="mb-3">
        <h6>1. What is the primary purpose of a firewall?</h6>
        <div><input type="radio" name="q1" value="1"> To block unauthorized network traffic</div> <!-- Correct -->
        <div><input type="radio" name="q1" value="2"> To scan for viruses</div>
        <div><input type="radio" name="q1" value="3"> To encrypt email messages</div>
        <div><input type="radio" name="q1" value="4"> To create VPN tunnels</div>
    </div>

    <div class="mb-3">
        <h6>2. What does a VPN do?</h6>
        <div><input type="radio" name="q2" value="1"> Prevents all malware infections</div>
        <div><input type="radio" name="q2" value="2"> Acts as a firewall</div>
        <div><input type="radio" name="q2" value="3"> Encrypts traffic & hides IP address</div> <!-- Correct -->
        <div><input type="radio" name="q2" value="4"> Monitors network speed</div>
    </div>

    <div class="mb-3">
        <h6>3. Which protocol is used to send emails securely?</h6>
        <div><input type="radio" name="q3" value="1"> HTTP</div>
        <div><input type="radio" name="q3" value="2"> FTP</div>
        <div><input type="radio" name="q3" value="3"> DNS</div>
        <div><input type="radio" name="q3" value="4"> SMTP over TLS/SSL</div> <!-- Correct -->
    </div>

    <div class="mb-3">
        <h6>4. What is a DMZ?</h6>
        <div><input type="radio" name="q4" value="1"> A subnet for public-facing servers</div> <!-- Correct -->
        <div><input type="radio" name="q4" value="2"> A secure VPN endpoint</div>
        <div><input type="radio" name="q4" value="3"> A firewall setting</div>
        <div><input type="radio" name="q4" value="4"> A type of malware</div>
    </div>

    <div class="mb-3">
        <h6>5. HTTPS uses which port?</h6>
        <div><input type="radio" name="q5" value="1"> 443</div> <!-- Correct -->
        <div><input type="radio" name="q5" value="2"> 80</div>
        <div><input type="radio" name="q5" value="3"> 22</div>
        <div><input type="radio" name="q5" value="4"> 25</div>
    </div>

    <div class="mb-3">
        <h6>6. What does NAT stand for?</h6>
        <div><input type="radio" name="q6" value="1"> Network Authentication Token</div>
        <div><input type="radio" name="q6" value="2"> Network Address Translation</div> <!-- Correct -->
        <div><input type="radio" name="q6" value="3"> Network Access Terminal</div>
        <div><input type="radio" name="q6" value="4"> Network Allocation Table</div>
    </div>

    <div class="mb-3">
        <h6>7. What does a router do?</h6>
        <div><input type="radio" name="q7" value="1"> Directs traffic between networks</div> <!-- Correct -->
        <div><input type="radio" name="q7" value="2"> Scans for viruses</div>
        <div><input type="radio" name="q7" value="3"> Encrypts data</div>
        <div><input type="radio" name="q7" value="4"> Creates VPN connections</div>
    </div>

    <div class="mb-3">
        <h6>8. Which protocol securely transfers files?</h6>
        <div><input type="radio" name="q8" value="1"> SFTP</div> <!-- Correct -->
        <div><input type="radio" name="q8" value="2"> HTTP</div>
        <div><input type="radio" name="q8" value="3"> SMTP</div>
        <div><input type="radio" name="q8" value="4"> FTP (unencrypted)</div>
    </div>

    <div class="mb-3">
        <h6>9. Which is a secure wireless encryption protocol?</h6>
        <div><input type="radio" name="q9" value="1"> WPA3</div> <!-- Correct -->
        <div><input type="radio" name="q9" value="2"> WEP</div>
        <div><input type="radio" name="q9" value="3"> HTTP</div>
        <div><input type="radio" name="q9" value="4"> FTP</div>
    </div>

    <div class="mb-3">
        <h6>10. Which protocol resolves domain names?</h6>
        <div><input type="radio" name="q10" value="1"> DNS</div> <!-- Correct -->
        <div><input type="radio" name="q10" value="2"> HTTP</div>
        <div><input type="radio" name="q10" value="3"> SMTP</div>
        <div><input type="radio" name="q10" value="4"> VPN</div>
    </div>

    <button type="button" class="btn btn-primary" onclick="submitQuiz()">Submit</button>
</form>

<div class="mt-3">
    <button class="btn btn-secondary" onclick="window.location.href='quiz.html'">Return to Quiz Selection</button>
</div>